#!/usr/bin/env node

/**
 * Module dependencies.
 */

var program  = require("commander")
  , pm       = require("../lib/prettymidi");


program
  .version(require("../package").version)
  .usage("[options] <file>")
  .option("-w, --watch", "run step every time a watched file changes.")
  .option("-j, --json", "skip file writing and dump json to terminal.")
  .parse(process.argv);

if (program.args.length === 0) {
  console.log(program.helpInformation());
  process.exit();
} else if (program.args.length > 1) {
  console.log("Can only handle one file at a time.");
}

pm.load(program.args[0], {
  watch: program.watch,
  json: program.json
});

